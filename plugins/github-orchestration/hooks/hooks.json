{
  "_comment": "GitHub Orchestration Plugin - GitHub integration and CLI setup",
  "_notes": [
    "Installs GitHub CLI on remote, warns on local",
    "Branch context and issue sync at session start",
    "Creates GitHub issue on first user prompt",
    "Tracks issues created during sessions for cross-session discovery",
    "Surfaces related issues from previous sessions based on branch family",
    "Commit enhancement with issue context",
    "Auto-commit for subagent work",
    "Stacked PR workflow: subagents work on isolated branches with auto-PR",
    "Plan-to-issue synchronization with versioned update comments",
    "Issue-to-plan synchronization (gh issue edit detection)",
    "Task-to-subissue synchronization (excludes Plan/Explore)",
    "Explore agent findings posted as issue comments",
    "Auto-waits for CI checks after PR creation (gh pr create)",
    "Auto-commit and PR status check on session end"
  ],
  "description": "GitHub integration with branch context, commit review, and issue orchestration",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/install-github.ts",
            "description": "Installs GitHub CLI on remote, warns if missing on local"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/add-github-context.ts",
            "description": "Displays branch issue context, sync status, and outstanding issues"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/create-issue-on-prompt.ts",
            "description": "Creates GitHub issue on first prompt, renames branch to {issueNum}-{type}/{name}"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/sync-plan-to-issue.ts",
            "description": "Automatically creates/updates GitHub issues from plan files"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/track-issue-creation.ts",
            "description": "Tracks issues created via gh issue create for cross-session discovery"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/enhance-commit-context.ts",
            "description": "Enhances commits with task and issue context (both main and subagent)"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/await-pr-status.ts",
            "description": "Waits for CI checks to complete after PR creation (gh pr create)"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/sync-issue-to-plan.ts",
            "description": "Syncs gh issue edit body changes back to local plan file"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/sync-task-to-subissue.ts",
            "description": "Creates GitHub subissues from Task tool prompts (excludes Plan/Explore agents)"
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/create-subagent-branch.ts",
            "description": "Creates isolated branch for stacked PR workflow (when enabled)"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/post-explore-findings.ts",
            "description": "Posts Explore agent findings as comments on linked GitHub issue"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/stacked-pr-subagent-stop.ts",
            "timeout": 900,
            "description": "Handles stacked PR workflow: push, create PR, auto-merge (when enabled)"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/commit-task-await-ci-status.ts",
            "timeout": 900,
            "description": "Auto-commits agent work with task context and waits for CI if triggered"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/commit-session-await-ci-status.ts",
            "timeout": 900,
            "description": "Auto-commits session changes, awaits CI checks, reports status with emoji table"
          }
        ]
      }
    ]
  }
}
