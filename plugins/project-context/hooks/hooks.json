{
  "_comment": "Enhanced Context Plugin - Context discovery, structure validation, and guidance",
  "_notes": [
    "Provides folder structure validation and context discovery",
    "Tracks task/agent calls for context management",
    "Validates folder structure for .claude directories",
    "Discovers CLAUDE.md files for context enrichment",
    "Encourages context updates on user prompts",
    "Redirects WebFetch to markdown versions when available"
  ],
  "description": "Enhanced context discovery and maintenance for Claude Code",
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/encourage-context-review.ts",
            "description": "Encourages updating plans, agents, skills, and CLAUDE.md files based on user prompts"
          }
        ]
      }
    ],
    "PreToolUse": [
    {
      "matcher": "Write|Edit",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/shared/hooks/validate-folder-structure-write.ts",
          "matcher": "Write",
          "description": "Validates folder structure when creating .claude configuration files. Ensures proper directory organization for agents, hooks, skills, and rules."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/shared/hooks/validate-rules-file.ts",
          "matcher": "Write|Edit",
          "description": "Validates rule file structure and frontmatter. Ensures rules have proper Required Skills metadata and valid YAML frontmatter."
        }
      ]
    },
    {
      "matcher": "Bash",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/shared/hooks/validate-folder-structure-mkdir.ts",
          "description": "Validates mkdir commands for .claude directories. Prevents creation of invalid or non-standard directory structures."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/shared/hooks/use-correct-package-manager.ts",
          "description": "Enforces correct package manager based on lockfiles. Blocks npm/yarn/pnpm/bun commands if wrong package manager detected."
        }
      ]
    },
    {
      "matcher": "WebFetch",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/try-markdown-page.ts",
          "description": "Attempts to redirect WebFetch to markdown versions of documentation pages. Checks for .md versions of URLs and modifies fetch target if available."
        }
      ]
    }
  ],
  "SubagentStart": [
    {
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/inject-agent-context.ts",
          "description": "Injects SERP-style context into subagents based on prompt matching against metadata-index.json."
        }
      ]
    }
  ],
  "SubagentStop": [
    {
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/run-task-vitests.ts",
          "description": "Runs vitest for all files edited during the agent's task. Blocking on failure, 500 char limit."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/run-task-typechecks.ts",
          "description": "Runs tsc --noEmit after agent completes. Blocking on type errors, 500 char limit."
        }
      ]
    }
  ],
  "PostToolUse": [
    {
      "matcher": "Write|Edit",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/run-file-eslint.ts",
          "description": "Runs ESLint on edited .ts/.tsx/.js/.jsx files. Blocking on errors, 500 char limit."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/run-file-vitests.ts",
          "description": "Runs related vitest tests for edited files. Non-blocking (warns only), 500 char limit."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/track-task-scope.ts",
          "description": "Provides advisory when files are edited outside expected task scope. Non-blocking."
        }
      ]
    },
    {
      "matcher": "Read",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/add-folder-context.ts",
          "description": "Discovers and adds CLAUDE.md context when reading files. Automatically enriches Claude's context with folder-level documentation."
        }
      ]
    }
  ]
  },
  "_planned_features": [
    "Generate code structure maps on SessionStart",
    "Update maps when files are modified (PostToolUse)",
    "Create navigation indexes for large codebases",
    "Export architecture diagrams",
    "Track code dependencies and relationships"
  ]
}
