{
  "_comment": "Next.js Supabase AI SDK Dev Plugin - Local dev environment setup",
  "_notes": [
    "Installs Vercel CLI on remote, warns on local",
    "Sets up Supabase local dev: CLI, Docker, server, env vars, dev server",
    "Tracks task/agent calls for context",
    "Check hooks moved to rule-based system in project-context plugin"
  ],
  "description": "Local development environment setup for Next.js, Supabase, and AI SDK projects",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/install-vercel.ts",
            "description": "Installs Vercel CLI on remote, warns if missing on local"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/link-vercel-apps.ts",
            "description": "Auto-links monorepo apps to Vercel projects and pulls env vars"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/install-start-supabase-next.ts",
            "description": "Sets up Supabase local dev: installs CLI, starts Docker, starts Supabase, exports env vars, starts dev server"
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/cache-supabase-schema.ts",
            "description": "Caches Supabase table/column metadata for context matching. Checks for stale cache and provides refresh instructions."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/validate-supabase-env.ts",
            "description": "Validates Supabase environment variables in .env.local and dev.vars files. Blocks deprecated names (SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY) and incorrect prefixes."
          },
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/use-proxy-nextjs-16.ts",
            "description": "Blocks middleware.ts creation in Next.js 16+ projects. Requires proxy.ts instead. Exception: Supabase middleware allowed."
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "browser_eval",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/move-playwright-screenshots.ts",
            "description": "Moves screenshots to .claude/screenshots/ to prevent permission prompts"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/stop-supabase-session.ts",
            "description": "Cleans up Supabase containers for worktree sessions: stops containers, restores config.toml, updates session state"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/cleanup-supabase-session.ts",
            "description": "Stops Supabase containers and marks session as stopped when session ends"
          }
        ]
      }
    ]
  }
}
