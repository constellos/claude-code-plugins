{
  "_comment": "Code Context Plugin - Code structure mapping, navigation, and folder validation",
  "_notes": [
    "This plugin provides folder structure validation and context discovery",
    "Tracks task/agent calls for context management",
    "Validates folder structure for .claude directories",
    "Discovers CLAUDE.md files for context enrichment"
  ],
  "PreToolUse": [
    {
      "matcher": "Task",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PROJECT_DIR}/shared/hooks/log-task-call.ts",
          "description": "Logs Task tool calls before agent execution. Saves context for later retrieval in SubagentStop hooks."
        }
      ]
    },
    {
      "matcher": "Write|Edit",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PROJECT_DIR}/shared/hooks/validate-folder-structure-write.ts",
          "matcher": "Write",
          "description": "Validates folder structure when creating .claude configuration files. Ensures proper directory organization for agents, hooks, skills, and rules."
        },
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PROJECT_DIR}/shared/hooks/validate-rules-file.ts",
          "matcher": "Write|Edit",
          "description": "Validates rule file structure and frontmatter. Ensures rules have proper Required Skills metadata and valid YAML frontmatter."
        }
      ]
    },
    {
      "matcher": "Bash",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PROJECT_DIR}/shared/hooks/validate-folder-structure-mkdir.ts",
          "description": "Validates mkdir commands for .claude directories. Prevents creation of invalid or non-standard directory structures."
        }
      ]
    }
  ],
  "PostToolUse": [
    {
      "matcher": "Task",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PROJECT_DIR}/shared/hooks/log-task-result.ts",
          "description": "Logs Task tool results after agent completion. Captures agent output and context for analysis."
        }
      ]
    },
    {
      "matcher": "Read",
      "hooks": [
        {
          "type": "command",
          "command": "npx tsx ${CLAUDE_PLUGIN_ROOT}/hooks/add-folder-context.ts",
          "description": "Discovers and adds CLAUDE.md context when reading files. Automatically enriches Claude's context with folder-level documentation."
        }
      ]
    }
  ],
  "_planned_features": [
    "Generate code structure maps on SessionStart",
    "Update maps when files are modified (PostToolUse)",
    "Create navigation indexes for large codebases",
    "Export architecture diagrams",
    "Track code dependencies and relationships"
  ]
}
